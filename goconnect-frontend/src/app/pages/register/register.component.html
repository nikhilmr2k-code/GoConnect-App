<app-navbar></app-navbar>

<div class="register-container">
  <div class="container">
    <div class="register-card modern-container">
      <div class="modern-header">
        <h2>Join GoConnect</h2>
        <p>Create your account to start exploring</p>
      </div>
      
      <div class="modern-body">
        <form (ngSubmit)="onSubmit()" #registerForm="ngForm">
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label" for="name">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
                Full Name
                <span class="required">*</span>
              </label>
              <input 
                type="text" 
                id="name"
                name="name"
                [(ngModel)]="registerData.name"
                required
                minlength="2"
                class="form-input"
                placeholder="Enter your full name"
                #nameField="ngModel">
              <div class="error-message" *ngIf="nameField.invalid && nameField.touched">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="15" y1="9" x2="9" y2="15"></line>
                  <line x1="9" y1="9" x2="15" y2="15"></line>
                </svg>
                <span *ngIf="nameField.errors?.['required']">Full name is required</span>
                <span *ngIf="nameField.errors?.['minlength']">Name must be at least 2 characters</span>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label" for="age">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                Age
                <span class="required">*</span>
              </label>
              <input 
                type="number" 
                id="age"
                name="age"
                [(ngModel)]="registerData.age"
                required
                min="1"
                max="120"
                class="form-input"
                placeholder="Enter your age"
                #ageField="ngModel">
              <div class="error-message" *ngIf="ageField.invalid && ageField.touched">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="15" y1="9" x2="9" y2="15"></line>
                  <line x1="9" y1="9" x2="15" y2="15"></line>
                </svg>
                <span *ngIf="ageField.errors?.['required']">Age is required</span>
                <span *ngIf="ageField.errors?.['min'] || ageField.errors?.['max']">Age must be between 1 and 120</span>
              </div>
            </div>

            <div class="form-group full-width">
              <label class="form-label" for="email">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                  <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
                Email
                <span class="required">*</span>
              </label>
              <input 
                type="email" 
                id="email"
                name="email"
                [(ngModel)]="registerData.email"
                required
                email
                class="form-input"
                placeholder="Enter your email address"
                #emailField="ngModel">
              <div class="error-message" *ngIf="emailField.invalid && emailField.touched">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="15" y1="9" x2="9" y2="15"></line>
                  <line x1="9" y1="9" x2="15" y2="15"></line>
                </svg>
                <span *ngIf="emailField.errors?.['required']">Email is required</span>
                <span *ngIf="emailField.errors?.['email']">Please enter a valid email</span>
              </div>
            </div>

            <div class="form-group full-width">
              <label class="form-label" for="username">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                  <circle cx="8.5" cy="7" r="4"></circle>
                  <polyline points="17,11 19,13 23,9"></polyline>
                </svg>
                Username
                <span class="required">*</span>
              </label>
              <input 
                type="text" 
                id="username"
                name="username"
                [(ngModel)]="registerData.username"
                required
                minlength="3"
                class="form-input"
                placeholder="Choose a unique username"
                #usernameField="ngModel">
              <div class="error-message" *ngIf="usernameField.invalid && usernameField.touched">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="15" y1="9" x2="9" y2="15"></line>
                  <line x1="9" y1="9" x2="15" y2="15"></line>
                </svg>
                <span *ngIf="usernameField.errors?.['required']">Username is required</span>
                <span *ngIf="usernameField.errors?.['minlength']">Username must be at least 3 characters</span>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label" for="password">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                  <circle cx="12" cy="16" r="1"></circle>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
                Password
                <span class="required">*</span>
              </label>
              <input 
                type="password" 
                id="password"
                name="password"
                [(ngModel)]="registerData.password"
                required
                minlength="6"
                class="form-input"
                placeholder="Create a secure password"
                #passwordField="ngModel">
              <div class="error-message" *ngIf="passwordField.invalid && passwordField.touched">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="15" y1="9" x2="9" y2="15"></line>
                  <line x1="9" y1="9" x2="15" y2="15"></line>
                </svg>
                <span *ngIf="passwordField.errors?.['required']">Password is required</span>
                <span *ngIf="passwordField.errors?.['minlength']">Password must be at least 6 characters</span>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label" for="confirmPassword">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 12l2 2 4-4"></path>
                  <path d="M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3"></path>
                  <path d="M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3"></path>
                </svg>
                Confirm Password
                <span class="required">*</span>
              </label>
              <input 
                type="password" 
                id="confirmPassword"
                name="confirmPassword"
                [(ngModel)]="confirmPassword"
                required
                class="form-input"
                placeholder="Confirm your password"
                #confirmPasswordField="ngModel">
              <div class="error-message" *ngIf="confirmPasswordField.invalid && confirmPasswordField.touched">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="15" y1="9" x2="9" y2="15"></line>
                  <line x1="9" y1="9" x2="15" y2="15"></line>
                </svg>
                <span *ngIf="confirmPasswordField.errors?.['required']">Please confirm your password</span>
              </div>
              <div class="error-message" *ngIf="confirmPassword && registerData.password !== confirmPassword">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="15" y1="9" x2="9" y2="15"></line>
                  <line x1="9" y1="9" x2="15" y2="15"></line>
                </svg>
                Passwords do not match
              </div>
            </div>
          </div>

          <div class="error-message" *ngIf="errorMessage">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="15" y1="9" x2="9" y2="15"></line>
              <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
            {{ errorMessage }}
          </div>

          <div class="success-message" *ngIf="successMessage">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
              <polyline points="22,4 12,14.01 9,11.01"></polyline>
            </svg>
            {{ successMessage }}
          </div>

          <button 
            type="submit" 
            class="btn btn-primary"
            [disabled]="isLoading || !registerForm.form.valid || registerData.password !== confirmPassword">
            <svg *ngIf="isLoading" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 12a9 9 0 11-6.219-8.56"></path>
            </svg>
            <svg *ngIf="!isLoading" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="8.5" cy="7" r="4"></circle>
              <polyline points="17,11 19,13 23,9"></polyline>
            </svg>
            <span *ngIf="isLoading">Creating Account...</span>
            <span *ngIf="!isLoading">Create Account</span>
          </button>
        </form>
      </div>

      <div class="modern-footer">
        <p>Already have an account? 
          <a routerLink="/login" class="text-primary">Sign in here</a>
        </p>
      </div>
    </div>
  </div>
</div>

<app-footer></app-footer>
